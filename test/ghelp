#!/usr/bin/env bats

@test 'should parse the simple fixture' {
  local GHELP_OUTPUT=$(bin/ghelp test/fixtures/simple.in)
  echo "${GHELP_OUTPUT}" | diff - test/fixtures/simple.out
}

@test 'should sort the tasks in the unsorted fixture' {
  local GHELP_OUTPUT=$(bin/ghelp test/fixtures/unsorted.in)
  echo "${GHELP_OUTPUT}" | diff - test/fixtures/unsorted.out
}

@test 'should pad the output with -p 2' {
  local GHELP_OUTPUT=$(bin/ghelp -p 2 test/fixtures/pad.in)
  echo "${GHELP_OUTPUT}" | diff - test/fixtures/pad.out
}

@test 'should pad the output with --pad 2' {
  local GHELP_OUTPUT=$(bin/ghelp --pad 2 test/fixtures/pad.in)
  echo "${GHELP_OUTPUT}" | diff - test/fixtures/pad.out
}

@test 'should pad the output with --pad=2' {
  local GHELP_OUTPUT=$(bin/ghelp --pad=2 test/fixtures/pad.in)
  echo "${GHELP_OUTPUT}" | diff - test/fixtures/pad.out
}

@test 'should ignore loose comments and targets' {
  local GHELP_OUTPUT=$(bin/ghelp test/fixtures/loose.in)
  echo "${GHELP_OUTPUT}" | diff - test/fixtures/loose.out
}
